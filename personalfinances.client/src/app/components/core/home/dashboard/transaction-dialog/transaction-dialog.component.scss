.content {
  position: relative;
  width: 100%;
  border-radius: 8px;
  overflow: hidden;
  z-index: 1000;
}
// Dialog styles
:host {
  display: block;
}

// Variables for light/dark mode
$primary-color-light: var(--primary-color, #3f51b5);
$primary-color-dark: var(--primary-color-dark, #5c6bc0);
$success-color: var(--success-color, #4caf50);
$danger-color: var(--danger-color, #f44336);
$warning-color: var(--warning-color, #ff9800);
$info-color: var(--info-color, #2196f3);
$bg-color-light: var(--card-bg-color, #ffffff);
$bg-color-dark: var(--dark-bg-color, #1e1e2f);
$text-color-light: rgba(0, 0, 0, 0.87);
$text-color-dark: rgba(255, 255, 255, 0.87);

// Material Dialog customization
::ng-deep .mat-mdc-dialog-container {
  .mdc-dialog__surface {
    border-radius: 12px;
  }
}

// Dialog title
h2[mat-dialog-title] {
  margin: 0;
  padding: 16px 24px;
  background-color: $primary-color-light;
  color: white;
  font-size: 1.5rem;
  border-radius: 12px 12px 0 0;

  &.edit-mode {
    background-color: $info-color;
  }
}

// Dialog content
.transaction-dialog-content {
  background: white;
  padding: 24px !important;
  max-height: 70vh;
  overflow-y: auto;

  // Make scrollbar prettier
  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.05);
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;

    &:hover {
      background: rgba(0, 0, 0, 0.3);
    }
  }
}

// Sticky dialog actions (buttons)
::ng-deep .mat-mdc-dialog-actions {
  position: sticky !important;
  bottom: 0 !important;
  background-color: $bg-color-light !important;
  margin: 0 !important;
  padding: 16px 24px !important;
  border-top: 1px solid rgba(0, 0, 0, 0.1) !important;
  box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.05) !important;
  z-index: 1;
}

// Section stylings
.section-title {
  margin: 24px 0 8px;
  font-size: 1rem;
  font-weight: 500;
  color: rgba(0, 0, 0, 0.6);
}

// Transaction type selector
.transaction-type-selector {
  margin: 0 0 24px;

  .mat-button-toggle-group {
    width: 100%;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);

    .mat-button-toggle {
      width: 50%;
      font-weight: 500;

      .mat-button-toggle-button {
        height: 48px;
      }

      .mat-button-toggle-label-content {
        line-height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .mat-icon {
        font-size: 20px;
        height: 20px;
        width: 20px;
        margin-right: 4px;
      }
    }

    .mat-button-toggle-checked {
      &[value="expense"] {
        background-color: rgba(var(--danger-color-rgb, 244, 67, 54), 0.08);
        color: $danger-color;
      }

      &[value="income"] {
        background-color: rgba(var(--success-color-rgb, 76, 175, 80), 0.08);
        color: $success-color;
      }
    }
  }
}

// Dividers
mat-divider {
  margin: 16px 0;
}

// Form sections
.form-section {
  margin-bottom: 24px;

  &.additional-details {
    background-color: rgba(0, 0, 0, 0.02);
    padding: 16px;
    border-radius: 8px;
    margin-top: 16px;
  }
}

// Form rows
.form-row {
  margin-bottom: 16px;
  display: flex;
  gap: 16px;

  &:last-child {
    margin-bottom: 0;
  }

  // Amount and description row
  &.amount-description-row {
    .amount-field {
      width: 35%;
      min-width: 120px;

      &.income-amount {
        // Input text color for income
        ::ng-deep .mat-mdc-input-element {
          color: $success-color;
          font-weight: 600;
        }
      }

      &.expense-amount {
        // Input text color for expense
        ::ng-deep .mat-mdc-input-element {
          color: $danger-color;
          font-weight: 600;
        }
      }
    }

    .description-field {
      flex: 1;
    }
  }

  // Date and status row
  &.date-status-row {
    .date-field {
      flex: 1;
    }

    .status-field {
      width: 40%;
      min-width: 120px;

      ::ng-deep {
        .pending {
          color: $warning-color;
        }

        .confirmed {
          color: $success-color;
        }

        .cancelled {
          color: $danger-color;
        }
      }
    }
  }
}

// Full width fields
.full-width {
  width: 100%;
}

// Button spinner
.button-spinner {
  display: inline-block;
  margin-left: 8px;
}

// Responsive styles
@media (max-width: 600px) {
  .form-row {
    flex-direction: column;
    gap: 0;

    .amount-field,
    .description-field,
    .date-field,
    .status-field {
      width: 100% !important;
    }

    &.date-status-row {
      flex-direction: column;
    }
  }

  .transaction-type-selector .mat-button-toggle-group .mat-button-toggle-label-content {
    padding: 0 8px;
  }

  ::ng-deep .mat-mdc-dialog-actions {
    flex-direction: column-reverse;

    button {
      width: 100%;
    }
  }
}

// Dark theme styles
:host-context(.dark-theme), :host-context(.dark) {
  // Dialog title in dark mode
  h2[mat-dialog-title] {
    background-color: $primary-color-dark;
    color: white;

    &.edit-mode {
      background-color: $info-color;
    }
  }

  // Dialog content in dark mode
  ::ng-deep .mat-mdc-dialog-content {
    background-color: $bg-color-dark;
    color: $text-color-dark;
  }

  // Section title in dark mode
  .section-title {
    color: rgba(255, 255, 255, 0.7);
  }

  // Additional details background in dark mode
  .form-section.additional-details {
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  // Button toggles in dark mode
  .transaction-type-selector .mat-button-toggle-group {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

    .mat-button-toggle {
      background-color: rgba(255, 255, 255, 0.05);
      color: rgba(255, 255, 255, 0.8);

      &:hover:not(.mat-button-toggle-checked) {
        background-color: rgba(255, 255, 255, 0.08);
      }
    }
  }

  // Mat divider in dark mode
  mat-divider {
    border-top-color: rgba(255, 255, 255, 0.1);
  }

  // Dialog actions in dark mode
  ::ng-deep .mat-mdc-dialog-actions {
    background-color: $bg-color-dark !important;
    border-top-color: rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.2) !important;
  }

  // Form fields in dark mode
  ::ng-deep {
    .mat-mdc-form-field-focus-overlay {
      background-color: rgba(255, 255, 255, 0.05);
    }

    .mat-mdc-form-field-flex {
      background-color: rgba(255, 255, 255, 0.04);
    }

    .mat-mdc-text-field-wrapper {
      background-color: transparent;
    }

    // Input background and text color
    .mat-mdc-input-element {
      color: rgba(255, 255, 255, 0.87) !important;

      &::placeholder {
        color: rgba(255, 255, 255, 0.4);
      }
    }

    // Labels and hints
    .mat-mdc-form-field-label,
    .mat-hint {
      color: rgba(255, 255, 255, 0.6) !important;
    }

    // Select options
    .mat-mdc-select-value,
    .mat-mdc-select-arrow {
      color: rgba(255, 255, 255, 0.87);
    }

    // Datepicker icon
    .mat-datepicker-toggle-default-icon {
      color: rgba(255, 255, 255, 0.7);
    }

    // Prefix
    .mat-mdc-form-field-prefix {
      color: rgba(255, 255, 255, 0.7);
    }

    // Scrollbar track
    .transaction-dialog-content::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
    }

    // Scrollbar thumb
    .transaction-dialog-content::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);

      &:hover {
        background: rgba(255, 255, 255, 0.3);
      }
    }
  }
}

// For Angular Material dialogs specific dark mode issues
.cdk-overlay-container.dark-theme, .dark .cdk-overlay-container {
  .mat-mdc-dialog-container {
    --mdc-dialog-container-color: $bg-color-dark;

    .mdc-dialog__surface {
      background-color: $bg-color-dark;
      color: $text-color-dark;
    }
  }

  .mat-mdc-select-panel,
  .mat-datepicker-content {
    background-color: $bg-color-dark;
    color: $text-color-dark;

    .mat-calendar-body-cell-content {
      color: $text-color-dark;
    }

    .mat-calendar-table-header {
      color: rgba(255, 255, 255, 0.6);
    }

    .mat-calendar-arrow {
      fill: white;
    }

    .mat-mdc-option {
      color: $text-color-dark;

      &:hover:not(.mat-mdc-option-disabled) {
        background: rgba(255, 255, 255, 0.04);
      }

      &.mat-mdc-option-active {
        background: rgba(255, 255, 255, 0.08);
      }

      &.mat-selected:not(.mat-mdc-option-disabled) {
        background: rgba($primary-color-dark, 0.2);
      }
    }
  }

  // Override buttons in dark mode
  .mat-mdc-button {
    color: rgba(255, 255, 255, 0.87);
  }
}
